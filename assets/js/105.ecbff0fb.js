(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{480:function(t,e,a){"use strict";a.r(e);var s=a(45),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"xdebug-vscode-远程调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xdebug-vscode-远程调试"}},[t._v("#")]),t._v(" Xdebug+vscode 远程调试")]),t._v(" "),a("h2",{attrs:{id:"环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[t._v("#")]),t._v(" 环境")]),t._v(" "),a("ul",[a("li",[a("h5",{attrs:{id:"php-7-2-26"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-7-2-26"}},[t._v("#")]),t._v(" php 7.2.26")])]),t._v(" "),a("li",[a("h5",{attrs:{id:"xdebug-2-9-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xdebug-2-9-8"}},[t._v("#")]),t._v(" Xdebug 2.9.8")])]),t._v(" "),a("li",[a("h5",{attrs:{id:"centos-7-8-宝塔面板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-8-宝塔面板"}},[t._v("#")]),t._v(" centos 7.8 + 宝塔面板")])])]),t._v(" "),a("h4",{attrs:{id:"其他工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他工具"}},[t._v("#")]),t._v(" 其他工具")]),t._v(" "),a("p",[t._v("vscode, Xshell")]),t._v(" "),a("h2",{attrs:{id:"开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),a("h3",{attrs:{id:"xdebug-安装、配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xdebug-安装、配置"}},[t._v("#")]),t._v(" Xdebug 安装、配置")]),t._v(" "),a("blockquote",[a("p",[t._v("首先要确保远程端的Xdebug已启动，并可以正常使用。")])]),t._v(" "),a("h4",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("blockquote",[a("p",[t._v("Linux 与 windows Xdeug安装方式不同，这里只关注 liunx 下的安装方式")])]),t._v(" "),a("p",[a("strong",[t._v("通过 pecl 安装")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pecl install xdebug \n\n// 如果安装了多个版本的php,\n// 应该去使用想安装xdeubg的PHP版本安装目录下的 /bin/pecl\n// 如： /www/server/php/72/bin/pecl\n")])])]),a("p",[a("strong",[t._v("通过源码自己编译安装")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("下载xdebug源码\nwget "),a("a",{attrs:{href:"https://link.jianshu.com/?t=http://www.xdebug.org/files/xdebug-2.2.3.tgz",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.xdebug.org/files/xdebug-2.2.3.tgz"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Github: https://github.com/xdebug/xdebug")])]),t._v(" "),a("li",[a("p",[t._v("编译")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("tar xzf xdebug-2.2.3.tgz // 解压\n\ncd xdebug-2.2.3\n\n/usr/local/php/bin/phpize  //我用的是这个,不知道 用 /usr/bin/phpize 可不可以\n\n// 配置 php-config 路径 同样在php的 bin 目录下\n./configure --with-php-config=/usr/local/php/bin/php-config\n\nmake // 执行完生成的文件夹在 ./modules/xdebug.so \n\nmake test\n// 这里可能会遇到一个问题需要在 php.ini 文件中取消禁用 proc_open 函数\n\nmake install\n")])])]),a("blockquote",[a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/c469b8955cc5",target:"_blank",rel:"noopener noreferrer"}},[t._v("编译安装php调试工具xdebug"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.php.cn/php-weizijiaocheng-196594.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP怎么安装扩展？"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("https://segmentfault.com/a/1190000019775071")]),t._v(" "),a("p",[t._v("https://my.oschina.net/bubifengyun/blog/753752")])]),t._v(" "),a("h4",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("在 php.ini 中添加一下内容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[Xdebug]\nzend_extension= "/www/server/php/72/lib/php/extensions/no-debug-non-zts-20170718/xdebug.so"\n\nxdebug.remote_enable=1\nxdebug.remote_handler=dbgp\nxdebug.remote_host=localhost\nxdebug.remote_port=9000\nxdebug.remote_autostart=1\n\n// 可酌情添加\n#xdebug.idekey=VSCODE\n#xdebug.profiler_enable=1\n#xdebug.default_enable=1\n\n')])])]),a("h3",{attrs:{id:"配置-vscode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-vscode"}},[t._v("#")]),t._v(" 配置 VsCode")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("安装 php debug 插件")])]),t._v(" "),a("li",[a("p",[t._v("添加配置")]),t._v(" "),a("p",[t._v("注：在插件自动生成的配置中 添加 pathMappings， 修改后台的配置如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    // 使用 IntelliSense 了解相关属性。 \n    // 悬停以查看现有属性的描述。\n    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "name": "Listen for XDebug",\n            "type": "php",\n            "request": "launch",\n            "port": 9006, // 没有被占用的端口\n            \n            // 远程目录->本地目录\n            "pathMappings": {\n                "/www/wwwroot/xdebug.1949cn.top": "${workspaceRoot}",\n            }\n        },\n        {\n            "name": "Launch currently open script",\n            "type": "php",\n            "request": "launch",\n            "program": "${file}",\n            "cwd": "${fileDirname}",\n            "port": 9000\n        }\n    ]\n}\n')])])])])]),t._v(" "),a("h3",{attrs:{id:"建立-ssh-隧道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建立-ssh-隧道"}},[t._v("#")]),t._v(" 建立 ssh 隧道")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("确保能通过 ssh 连上服务器")])]),t._v(" "),a("li",[a("p",[t._v("确保 xdebug 配置的端口已放行。阿里云、腾讯云需要将端口添加到安全组")])])]),t._v(" "),a("h4",{attrs:{id:"xshell-新建会话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xshell-新建会话"}},[t._v("#")]),t._v(" Xshell 新建会话")]),t._v(" "),a("p",[t._v("我们新建一个会话，填好名称、主机信息。注意：勾选连接异常关闭时自动重新连接，间隔可自己设置，这里是60秒")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/JankinWang/PicGo/main/image-20201116171530067.png",alt:"image-20201116171530067"}})]),t._v(" "),a("h4",{attrs:{id:"不分配终端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不分配终端"}},[t._v("#")]),t._v(" 不分配终端")]),t._v(" "),a("p",[t._v("为安全起见，服务器上用于建立隧道的用户，可以被被设置为不允许通过Shell登录的。如果设置了，那我们需要设置Xshell在进行SHH连接时不分配终端。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/JankinWang/PicGo/main/image-20201116171700647.png",alt:"image-20201116171700647"}})]),t._v(" "),a("h4",{attrs:{id:"添加一个远程-r-隧道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加一个远程-r-隧道"}},[t._v("#")]),t._v(" 添加一个远程（R）隧道")]),t._v(" "),a("p",[t._v("我们添加一个远程（R）隧道，则将云服务器的9090端口，映射到localhost:9090端口，从而达到将云服务器9090端口的数据转发到本地xdebug对应的9090端口的目的。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/JankinWang/PicGo/main/image-20201116172325070.png",alt:"image-20201116172325070"}})]),t._v(" "),a("h4",{attrs:{id:"输入日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输入日志"}},[t._v("#")]),t._v(" 输入日志")]),t._v(" "),a("p",[t._v("为了能了解隧道的运行情况，我们设置Xshell输出隧道相关的日志。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/JankinWang/PicGo/main/image-20201116172655894.png",alt:"image-20201116172655894"}})]),t._v(" "),a("blockquote",[a("p",[t._v("建立ssh隧道参考")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/weixin_41245990/article/details/107325629")])])])}),[],!1,null,null,null);e.default=n.exports}}]);