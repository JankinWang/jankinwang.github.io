## 雪花算法

#### 特征描述描述

1.  64 bit 长整型数字
2.  同一毫秒内最多生成 4096个id
3.  分布式id



#### 简单实现(php)

```php
		// 假设时间戳(长度13位)
        $time = \sprintf('%.0f', microtime(true)*1000);
        // 机房id
        $house = 18; // 取值范围 0-31（占5位）
        // 主机id 
        $workerId = 21; // 取值范围 0-31 （占5位）
        // 自增id
        $autoId = 101; // 取值范围 0-4096 （占12位）

        
        echo decbin($time<<22)."\n";
        echo decbin($house<<17)."\n";
        echo decbin($workerId<<12)."\n";
        echo \decbin($autoId);

        echo "\n----------------------------------------------------------------------------\n";
        echo decbin(($time<<22) | ($house<<17) | ($workerId<<12) | ($autoId));
        echo "\n-----------------------------------------------------------------------------\n";
        printf('Id: %d', ($time<<22) | ($house<<17) | ($workerId<<12) | ($autoId));
```



