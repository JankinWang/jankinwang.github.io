# HTTPS

## 获取证书

1.   在服务器上生成私钥和公钥，私钥绝不可外泄。
2.   向第三方数字证书认证机构（CA）申请证书并提交服务器公钥。
3.   认证机构在判明提出申请者身份后，机构用自己的私钥对服务器公钥做数字签名，并将公钥放入证书后绑定在一起（颁发证书）。
4.   服务端将数字证书放到web服务器配置的证书目录，如：Nginx配置虚拟主机时可配置证书文件位置。

![image](http://raw.githubusercontent.com/JankinWang/PicGo/main/image-20210908153820449.png)

## https链接过程

1.   用户访问一个支持https协议的网站

2.   网站的服务器返回自己的证书

3.   浏览器（客户端）收到证书后验证证书

4.   验证失败发出警报

5.   验证成功后生成随机数作为后期对称加密的秘钥

6.   将**随机数**用证书中的**公钥**加密后发回服务器

7.   服务器收到密文并用私钥解密出**随机数**

8.   接下来浏览器和服务器，就可以用**随机数**作为秘钥进行对称加密通讯了

