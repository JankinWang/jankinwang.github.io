### 获取相对时间描述

```php
/**
 * 计算相对相对时间
 *
 * @param  int $timestamp 时间戳
 * @return string 时间描述文本
 */
function relativeTime($timestamp)
{
    $t = time() - $timestamp;

    if ($t < 0) {
        throw new Exception('时间戳必须小于当前时间');
    } else if(!is_numeric($timestamp)) {
        throw new Exception('时间戳必须为纯数字');
    }

    if ($t < 60) {
        // 小于10秒
        $time_desc = '刚刚';
    } else if ($t < (3600)) {
        // 小于一小时
        $time_desc = intval($t / 60) . '分钟前';
    } else if ($t < (3600 * 24)) {
        // 小于一天
        $time_desc = intval($t / (3600)) . '小时前';
    } else if (date('y', time()) == date('y', $timestamp)) {
        // 小于一年
        $time_desc = date('m-d H:i', $timestamp);
    } else {
        // 大于一年
        $time_desc = date('Y-m-d H:i', $timestamp);
    }

    return $time_desc;
}
```





### 去除数据集中的null 

```php
// 去除数据集中的null 
function arrayNullTransition($arr, $toarray = true)
{
        $arr = json_encode($arr, JSON_NUMERIC_CHECK);

        if ($toarray === true) {
            $arr = json_decode($arr, true);
        } else {
            $arr = json_decode($arr);
        }

        if (is_object($arr)) {
            foreach ($arr as $k => $v) {

                if ($v === null) {
                    $arr->$k = '';
                }
                if (is_array($v) || is_object($v)) {
                    $arr->$k = arrayNullTransition($v, $toarray);
                } else {
                    continue;
                }
            }
            return $arr;
        } else {
            foreach ($arr as $k => $v) {
                if (is_array($v) || is_object($v)) {
                    $arr[$k] = arrayNullTransition($v, $toarray);
                } else if ($v === null) {
                    $arr[$k] = '';
                } else {
                    continue;
                }
            }
            unset($k, $v);
            return $arr;
        }
}

```





### 迭代将数组中的 null 替换为'' (只针对数组)

```php
/**
* 迭代将数组中的 null 替换为 ''
* @param  array $arr 数组数据
* @return array $arr
* @date: 2020-11-24 08:36:27
*/
function replaceNullInArray(array $arr)
{
	foreach ($arr as $key => $value) {
    	if (is_array($value)) {
                $arr[$key] = replaceNullInArray($value);
        } else if ($value === null) {
                $arr[$key] = '';
        }
    }
    unset($key, $value);
    return $arr;
}
```





