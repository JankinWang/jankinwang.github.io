# Git 常用操作

推荐文章

>   https://mp.weixin.qq.com/s/E8RKXCFbymzVB-48HcYQLQ

## 提交

```shell
git commit -m '第一行提交原因'  -m '第二行提交原因'

## 只提交 `修改` 或 `删除`， `新增`的文件不会提交
git commit -am '提交原因'

## 修改最新一条提交记录的提交原因
git commit --amend -m '提交原因'
```



## 推送

```shell
git push <远程主机名> <本地分支名>:<远程分支名>

git push origin master
git push origin master:master
```



## 取消跟踪

```shell
## 删除readme1.txt的跟踪，并保留在本地。
git rm --cached readme1.txt

## 删除readme1.txt的跟踪，并且删除本地文件。
git rm --f readme1.txt

然后git commit即可。然后添加到 .gitignore 文件

```

## 提交日志

```shell
git log

git reflog
```



## 移动或重命名文件、目录

```shell
git mv a.md b.md -f
## 将 a.md 重命名为 b.md ，同时添加变动到暂存区，
## 加 -f 参数可以强制重命名，
## 相比用 mv a.md b.md 命令省去了 git add 操作
```



## 分支

```shell
git branch <分支名> ## 创建分支

git branch   ## 列出所有分支
git branch -a ## 本地和远程版本库分支表
git branch -r ## 远程峰值
git branch -vv ## 带有最后提交 id 和 提交信息的本地分支列表

git branch -d <分支名> ## 删除分支
```

### 切换分支

```shell
git checkout <分支名> ## 切换分支
git checkout -b <分支名> ## 创建并切换到分支
```



>   从本地版本库的 `HEAD`（也可以是提交ID、分支名、Tag名） 历史中检出 `demo.html` 覆盖当前工作区的文件，如果省略 `HEAD` 则是从暂存区检出

```shell
git checkout HEAD demo.html
```



>   这个命令会创建一个全新的，完全没有历史记录的新分支，但当前源分支上所有的最新文件都还在，真是强迫症患者的福音，但这个新分支必须做一次 `git commit`操作后才会真正成为一个新分支。

```shell
git checkout --orphan new_branch
```

### 合并分支

```shell
git merge -e --no-ff <分支名> ## 将其它分支合并到当前分支
# -e 编辑合并信息
## --no-ff 非 快进式合并
```



## 贮藏

```shell
git stash list ## 已贮藏
git stash show stash@{0} ## 展示一条记录
git stash drop stash@{0} ## 移除一条记录

git stash ## 贮藏未提交的文件

git stash pop ## 弹出最新

git stash apply stash@{0} ## 应用指定贮藏

```



## subtree

>    [git subtree教程](https://segmentfault.com/a/1190000012002151)

